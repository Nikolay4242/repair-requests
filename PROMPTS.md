# PROMPTS.md - История запросов к AI

---

## Запрос 1 - 19.02.2026 14:25

**Мой запрос:**
Ты — опытный backend/fullstack разработчик. Твоя задача — спроектировать и реализовать веб-сервис “Заявки в ремонтную службу” в виде полноценного Git-проекта. 
Тестовое задание: Веб-сервис “Заявки в ремонтную службу”
Цель: Создать небольшое веб-приложение для приёма и обработки заявок в ремонтную службу.
Проект должен: запускаться локально, иметь понятную структуру, содержать README, DECISIONS.md и PROMPTS.md, корректно обрабатывать гонку при параллельном “Взять в работу”.

Требования к проекту:
Стек:  NestJS + TypeORM + SQLite + React,
Предпочтительно запуск через Docker Compose: docker compose up

Роли:
- Диспетчер
- Мастер

Авторизация может быть простой: логин/пароль (через сиды) или выбор пользователя из списка

Модель Request (Заявка):
- clientName (обязательно)
- phone (обязательно)
- address (обязательно)
- problemText (обязательно)
- status: new | assigned | in_progress | done | canceled
- assignedTo (мастер, nullable)
- createdAt
- updatedAt

Обязательные страницы:
1) Создание заявки
2) Панель диспетчера
3) Панель мастера

КРИТИЧЕСКОЕ ТРЕБОВАНИЕ — защита от гонки:
Действие “Взять в работу” должно быть безопасным при параллельных запросах.
Если два запроса пришли одновременно: только один успешен, второй получает 409 Conflict.

В репозитории должно быть:
- исходники
- миграции
- сиды (1 диспетчер, 2 мастера, несколько заявок)
- минимум 2 автотеста
- README.md
- DECISIONS.md (5–7 архитектурных решений)
- PROMPTS.md (все запросы к AI с датой и временем)

**Ответ AI:**  создал структуру проекта, docker-compose.yml, модели данных, сервисы с защитой от гонок через пессимистичные блокировки.

---

## Запрос 2 - 19.02.2026 14:50

**Мой запрос:**
Промт на создание структуры папок проекта

**Ответ AI:** Предоставил полный набор bash-команд для создания структуры папок проекта: mkdir -p src/modules, client/src/components, test, data и т.д.

---

## Запрос 3 - 19.02.2026 15:05

**Мой запрос:**
Инициализация проекта установить зависимости

**Ответ AI:** Перешли к инициализации проекта и установке зависимостей. Создал package.json, tsconfig.json, nest-cli.json, настроил ESLint и Prettier.

---

## Запрос 4 - 19.02.2026 15:20

**Мой запрос:**
Обнаружение конфликтов.Варианты исправления?

**Ответ AI:** Обнаружил конфликт версий TypeScript. React Scripts 5.0.1 требует TypeScript версии 4.x. Исправил, понизив версию TypeScript до 4.9.5 и использовал флаг --legacy-peer-deps.

---

## Запрос 5 - 19.02.2026 15:35

**Мой запрос:**
ls -la src/modules/requests/ (и дальнейшие ошибки)

**Ответ AI:** Продолжил создание файлов, добавил модули, контроллеры, сервисы, защиту от гонок через пессимистичные блокировки.

---

## Запрос 6 - 19.02.2026 15:50

**Мой запрос:**
Создание защиты от "Гонок"

**Ответ AI:** Создал Requests Module с защитой от гонок, Audit Module, миграции и сиды.

---

## Запрос 7 - 19.02.2026 16:05

**Мой запрос:**
(Показал ошибки TypeScript при запуске миграций и seed)

**Ответ AI:** Исправил ошибки TypeScript, переписал конфигурационные файлы, создал простую рабочую версию.

---

## Запрос 8 - 19.02.2026 16:20

**Мой запрос:**
Запускаем проект ./simple-start.sh (показал ошибки компиляции)

**Ответ AI:** Создал упрощенную версию на чистом JavaScript без TypeScript, чтобы избежать ошибок компиляции.

---



## Запрос 9 - 19.02.2026 17:05

**Мой запрос:**
node simple-backend-final.js (Ошибка PathError: Missing parameter name at index 1: *)

**Ответ AI:** Исправил CORS настройки, убрал проблемный middleware, создал рабочую версию simple-backend-final.js.

---

## Запрос 10 - 19.02.2026 17:20

**Мой запрос:**
(Показал, что фронтенд запустился и показывает заявки)

**Ответ AI:** Поздравил с успешным запуском, добавил панель мастера.

---

## Запрос 11 - 19.02.2026 17:35

**Мой запрос:**
./race_test.sh
❌ Backend не запущен!

**Ответ AI:** Создал рабочий тест гонки race-test-working.sh с проверкой подключения и параллельными запросами.

---

## Запрос 14 - 19.02.2026 17:50

**Мой запрос:**
(Показал успешный результат теста с 1 успехом и 9 конфликтами)

**Ответ AI:** Подтвердил, что защита от гонок работает корректно, тест пройден.

---

